<!DOCTYPE html>
<html>
<head>
<title>Row 1</title>
</head>
<body>
<h1>Strona 1</h1>

<div id="out">Åadowanie...</div>

	<!-- ğŸ”™ Back to main page -->
<div style="margin-top: 20px;">
    <a href="/" style="font-size: 18px;">â¬… PowrÃ³t na stronÄ™ gÅ‚Ã³wnÄ…</a>
</div>

<script src="sse.js"></script>

<script>
// ğŸ”§ Change this constant to select row:
const ROW = {N};

let constants = {}; // Cleared on refresh

// ğŸ” Fully reload constants (cache-bust + wipe local cache)
function reloadConstants() {

// Completely remove previously cached values
constants = {};
document.getElementById("out").innerText = "OdÅ›wieÅ¼anieâ€¦";

    return fetch("/constants?ts=" + Date.now(), {
        cache: "no-store"    // â† absolutely no browser caching
    })
    .then(r => r.json())
    .then(data => {
        constants = data;   // restore fresh values
        updatePage();
    });
}

// ğŸ”˜ Refresh button handler
function manualRefresh() {
    refreshButton.innerText = "OdÅ›wieÅ¼amâ€¦";
    reloadConstants().then(() => {
        refreshButton.innerText = "OdÅ›wieÅ¼ dane";
    });
}

const refreshButton = document.querySelector("button");

// Update displayed text
function updatePage() {
    document.getElementById("out").innerText =
      `SiÅ‚a jest rÃ³wna ${constants["A" + ROW]}, ` +
      `ZrÄ™cznoÅ›Ä‡ jest rÃ³wna ${constants["B" + ROW]}, ` +
      `WytrzymaÅ‚oÅ›Ä‡ jest rÃ³wna ${constants["C" + ROW]}`;
}

// Load constants when page opens
reloadConstants();

// Load updates via SSE
loadInitial(updatePage);
connectSSE(() => reloadConstants());
</script>


</body>
</html>

