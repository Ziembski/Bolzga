<!DOCTYPE html>
<html>
<head>
<title>Row {N}</title>
</head>
<body>
<h1>Strona {N}</h1>

<div id="out">Åadowanie...</div>

<!-- ğŸ”˜ Refresh button -->
<button onclick="manualRefresh()">OdÅ›wieÅ¼ dane</button>

<!-- ğŸ”™ Back to main page -->
<div style="margin-top: 20px;">
    <a href="/" style="font-size: 18px;">â¬… PowrÃ³t na stronÄ™ gÅ‚Ã³wnÄ…</a>
</div>

<script src="/sse.js"></script>

<script>
// ğŸ”§ Change this constant to select row:
const ROW = 1;

// ğŸ” Fetch fresh constants (cache-bust)
function fetchFreshConstants() {
    return fetch("/constants?ts=" + Date.now())
        .then(r => r.json())
        .then(data => {
            constants = data;
            updatePage();
        });
}

// ğŸ”˜ Refresh button handler
function manualRefresh() {
    manualRefreshElement.innerText = "OdÅ›wieÅ¼am...";
    fetchFreshConstants().then(() => {
        manualRefreshElement.innerText = "OdÅ›wieÅ¼ dane";
    });
}

const manualRefreshElement = document.querySelector("button");

function updatePage() {
    document.getElementById("out").innerText =
      `SiÅ‚a jest rÃ³wna ${constants["A" + ROW]}, ` +
      `ZrÄ™cznoÅ›Ä‡ jest rÃ³wna ${constants["B" + ROW]}, ` +
      `WytrzymaÅ‚oÅ›Ä‡ jest rÃ³wna ${constants["C" + ROW]}`;
}

// Load fresh constants on page load
fetchFreshConstants();

// Load again via SSE
loadInitial(updatePage);
connectSSE(updatePage);
</script>

</body>
</html>